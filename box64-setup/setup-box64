#!/bin/bash

function abort
{
    REASON=$1

    if [ "$REASON" == "" ];
    then
        echo $REASON
    fi

    echo ""
    
    exit 1
}


function usage
{
    echo ""
}


if [ "$1" == "-h" ] || [ "$1" == "--h" ];
then
    usage
    abort
fi


if [ "$TERMUX_VERSION" == "" ];
then
    abort "This script is for Termux only."
fi


if [ "$PROOT_DISTRO" == "" ];
then
    echo "PROOT_DISTRO environment variable not detected."
    abort "Ensure the proot environment has been set-up and restart Termux."
fi


if [ -f "$PROOT_PATH/usr/local/bin/box64" ];
then
    abort "Box64 already installed in proot environment."
fi


cp "$HOME/termux-setup/box64-setup/boxify" "$PROOT_PATH/usr/local/bin/boxify"
cp "$HOME/termux-setup/box64-setup/installer" "$PROOT_PATH/root/install-box64"

chmod +x "$PROOT_PATH/usr/local/bin/boxify"
chmod +x "$PROOT_PATH/root/install-box64"

padmin /root/install-box64




